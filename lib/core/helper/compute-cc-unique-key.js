"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

exports.__esModule = true;
exports.default = _default;

var _util = _interopRequireDefault(require("../../support/util"));

var _uuid = _interopRequireDefault(require("./uuid"));

function _default(isClassSingle, ccClassKey, ccKey, forFragment) {
  if (forFragment === void 0) {
    forFragment = false;
  }

  var ccUniqueKey;
  var isCcUniqueKeyAutoGenerated = false;
  var newCcKey = ccKey;

  if (isClassSingle) {
    if (ccKey) _util.default.justWarning("now the ccClass is singleton, you needn't supply ccKey to instance props, cc will ignore the ccKey:" + ccKey);
    ccUniqueKey = ccClassKey;
    newCcKey = ccClassKey;
  } else {
    if (ccKey) {
      ccUniqueKey = _util.default.makeUniqueCcKey(ccClassKey, ccKey);
    } else {
      // const uuidStr = uuid().replace(/-/g, '_');
      var uuidStr = (0, _uuid.default)(forFragment);
      newCcKey = uuidStr;
      ccUniqueKey = _util.default.makeUniqueCcKey(ccClassKey, uuidStr);
      isCcUniqueKeyAutoGenerated = true;
    }
  }

  return {
    ccKey: newCcKey,
    ccUniqueKey: ccUniqueKey,
    isCcUniqueKeyAutoGenerated: isCcUniqueKeyAutoGenerated
  };
}